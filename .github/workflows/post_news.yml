name: Publicar noticia cada hora
on:
  schedule:
    - cron:  "0 * * * *"    # Ejecutar cada hora (en el minuto 0, horario UTC)
  workflow_dispatch:        # (Opcional) Permite ejecución manual desde la interfaz

jobs:
  publish_news:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repo
        uses: actions/checkout@v3

      - name: Configurar Python
        uses: actions/setup-python@v4
        with:
          python-version: "3.x"   # Usa la versión de Python 3 disponible

      - name: Instalar dependencias
        run: pip install -r requirements.txt

      - name: Ejecutar script de publicación
        env:
          WP_USER: ${{ secrets.WP_USER }}
          WP_PASS: ${{ secrets.WP_PASS }}
          WP_SITE: ${{ secrets.WP_SITE }}
        run: python news_poster.py
